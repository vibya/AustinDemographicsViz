var geojsonFeature = {"type":"FeatureCollection","features":[{"type":"Feature","properties":{},"geometry":{"type":"LineString","coordinates":[[-97.76928395032883,30.351826326789897],[-97.76942610740662,30.3517522601278],[-97.76968091726303,30.351685137166857],[-97.7700188755989,30.351604126635415],[-97.77016371488571,30.351546261929034],[-97.77027368545532,30.351446734554028],[-97.7703595161438,30.351335634108846],[-97.77045339345932,30.35112732043414],[-97.77052581310272,30.350898174879703],[-97.77002692222595,30.350733837838575],[-97.76983380317688,30.35068523105519],[-97.76961386203766,30.35066671417898],[-97.76950120925903,30.349838080381794],[-97.76979088783264,30.349764012214706],[-97.77013152837753,30.349745495164175],[-97.77031123638153,30.349784843892355],[-97.7710461616516,30.35003945292765],[-97.7711695432663,30.350078801537638],[-97.77128487825394,30.350099633148268],[-97.77143508195877,30.350118150131802],[-97.77152627706528,30.350125093999722],[-97.77153968811035,30.349983901921906],[-97.77157455682755,30.349812619455683],[-97.7720895409584,30.348930741471836],[-97.77210831642151,30.34865761229543],[-97.77200371026993,30.348240973100356],[-97.77177840471268,30.347671563331726],[-97.77173280715941,30.3474840740243],[-97.77170062065125,30.347132241268103],[-97.77186959981918,30.346058217662105],[-97.77184814214706,30.344794373065167],[-97.77175694704056,30.34398652245611],[-97.77168989181517,30.34364856578187],[-97.77156114578247,30.34344255052444],[-97.77140825986861,30.343278200963177],[-97.77112394571304,30.343069870136805],[-97.77081817388535,30.342896260776094],[-97.77049362659454,30.3426948735319],[-97.77017712593079,30.342461078625252],[-97.76993840932845,30.342192561013803],[-97.7697828412056,30.34193561674763],[-97.76968091726303,30.34162080123184],[-97.7696219086647,30.341305984703563],[-97.77022272348404,30.341333762673248],[-97.77143508195877,30.341303669872406],[-97.77350574731827,30.34124579907552],[-97.77505606412886,30.341208761747566],[-97.77577489614487,30.341190243078312],[-97.77713477611542,30.341218021080845],[-97.77890771627426,30.34125042874053],[-97.7796345949173,30.34132218852016],[-97.78096228837967,30.341495800672686],[-97.78227388858795,30.341685616273757],[-97.78245091438293,30.34175506091387],[-97.78257697820663,30.341819875866886],[-97.78279423713684,30.341968024169738],[-97.78323411941527,30.342352282785235],[-97.7836874127388,30.342736539892286],[-97.78434723615646,30.343192553899346],[-97.78459399938583,30.343368477516908],[-97.7847871184349,30.34353514170501],[-97.78499096632004,30.3437619897273],[-97.78511971235275,30.3440050405963],[-97.78528064489365,30.34448882576785],[-97.78530478477478,30.344736504332076],[-97.78526186943054,30.345028162398517],[-97.78510630130766,30.34559758754714],[-97.78502851724625,30.345801283543736],[-97.78479248285294,30.346234136128874],[-97.7847683429718,30.346296633402787],[-97.7847307920456,30.346428571961102],[-97.78475224971771,30.34659986035043],[-97.78518944978714,30.34729195497869],[-97.78544425964355,30.347775723902846],[-97.78550058603287,30.348053484883838],[-97.78549522161484,30.3483057837583],[-97.78548449277878,30.34858817255276],[-97.78540939092635,30.34982187797502],[-97.78534233570099,30.35083568054447],[-97.78530210256577,30.350993073608777],[-97.78519481420517,30.351199072972157],[-97.78502851724625,30.351381925976344],[-97.78481125831604,30.35152543062636],[-97.7837598323822,30.35193279751844],[-97.78338700532913,30.352124907452907],[-97.7831295132637,30.35232396072208],[-97.78267621994019,30.35281927756451],[-97.78252869844435,30.35298592565804],[-97.78241336345673,30.35316183167108],[-97.78233826160431,30.35331459189949],[-97.78229802846909,30.35349975549297],[-97.7823194861412,30.353689547812607],[-97.78238922357559,30.35420337395229],[-97.782461643219,30.354513519955834],[-97.78258502483368,30.354858382641154],[-97.78291225433348,30.355756408627546],[-97.78333336114882,30.356240135704155],[-97.78361767530441,30.356443809547194],[-97.78407901525496,30.356684514451324],[-97.78441965579987,30.35686735720387],[-97.78474420309065,30.357066400824465],[-97.78503388166428,30.357325619816194],[-97.78531014919281,30.357635755921674],[-97.78553277254105,30.357839426859037],[-97.78578490018845,30.35800838083759],[-97.78608530759811,30.358158819066023],[-97.78709381818771,30.35859624583127],[-97.78778851032257,30.358873976095555],[-97.78855025768279,30.35906375798931],[-97.78918325901031,30.35918410729212],[-97.78953462839127,30.359225766631674],[-97.79052436351775,30.359281312390138],[-97.79107421636581,30.359281312390138],[-97.79118418693542,30.359290570013474],[-97.79134780168533,30.359306770852232],[-97.79145777225494,30.359318342878268],[-97.79187887907028,30.359392403812468],[-97.79211223125458,30.35892026439628],[-97.79254674911499,30.35802458188868],[-97.79265403747559,30.357807024692807],[-97.7930161356926,30.356700715721693],[-97.79345333576202,30.355656885535193],[-97.79348015785217,30.35556662031739],[-97.79511094093323,30.352981296548176],[-97.79544353485107,30.352444318316262],[-97.79637694358826,30.35090743329637],[-97.79814720153809,30.3481298690154],[-97.79903769493103,30.346824386568848],[-97.80014276504517,30.345167046886587],[-97.80159115791321,30.342898575569592],[-97.80368328094482,30.339481880772972],[-97.80546426773071,30.33675955077974],[-97.80717015266418,30.334064925120494],[-97.81039953231812,30.328990308475788],[-97.81333923339844,30.324424780850254],[-97.81407952308655,30.323211592692495],[-97.81459450721741,30.32265592897744],[-97.81551718711853,30.321924300278862],[-97.81714797019958,30.32103522513889],[-97.82067775726318,30.319220005008273],[-97.8243041038513,30.31727508897562],[-97.82505512237549,30.316756438179922],[-97.82538771629333,30.31644154171459],[-97.82567739486694,30.31614516764627],[-97.82616019248962,30.31555241682036],[-97.82644987106323,30.315033756906317],[-97.82667517662048,30.31456140352465],[-97.8268575668335,30.313922333560658],[-97.82697558403015,30.313329569288708],[-97.82699704170227,30.312709015349963],[-97.82692193984985,30.31206993330587],[-97.82668590545654,30.311217817430926],[-97.82626748085022,30.30981921988128],[-97.82557010650635,30.30763329234865],[-97.8253984451294,30.30692933920658],[-97.8253126144409,30.306188330437532],[-97.82537698745728,30.305558468579612],[-97.82557010650635,30.304947128200137],[-97.82610654830933,30.30385411620212],[-97.8270936012268,30.302205312335193],[-97.82756567001343,30.301241953421997],[-97.82782316207886,30.300482375297204],[-97.82793045043944,30.300000688559297],[-97.82818794250488,30.297666327000773],[-97.82830864191055,30.297360632681475],[-97.82845884561539,30.297087359680233],[-97.82853126525879,30.29693914349661],[-97.82859027385712,30.296788611205812],[-97.82863587141036,30.29655933850354],[-97.82865196466446,30.29647596647892],[-97.82870560884476,30.296355540095956],[-97.82875388860703,30.296246693045678],[-97.82881557941437,30.296179532039478],[-97.82894432544708,30.296112370987295],[-97.82909989356993,30.296098475591435],[-97.82925546169281,30.29611468688641],[-97.82962560653687,30.29621195459993],[-97.82990723848343,30.2962767996887],[-97.8306770324707,30.29644122811439],[-97.83153265714645,30.296626499249623],[-97.83177673816681,30.29668439640761],[-97.83202350139618,30.296723766455504],[-97.8322085738182,30.29668671229321],[-97.83254384994505,30.296723766455504],[-97.83301323652267,30.29673766176274],[-97.8338125348091,30.296730714109376],[-97.83417195081711,30.296723766455504],[-97.83477813005447,30.29673766176274],[-97.83526360988616,30.296816401799987],[-97.83577591180801,30.296999356348216],[-97.8360253572464,30.297131361316612],[-97.83626675605774,30.297295788309423],[-97.83645987510681,30.297455583291782],[-97.83661007881165,30.297617693877356],[-97.83692121505737,30.2980762337969],[-97.83711165189743,30.29836571496518],[-97.83730745315552,30.298662142795887],[-97.83760517835617,30.299067413770597],[-97.83787339925766,30.299370786946834],[-97.83836424350737,30.299845529346555],[-97.83877193927765,30.300227637413315],[-97.83903479576111,30.30048005950122],[-97.83929765224457,30.300850586159637],[-97.83938348293304,30.301019638482366],[-97.83963561058043,30.301955210450146],[-97.83998966217041,30.30302971773485],[-97.84076213836669,30.30398379622886],[-97.84179210662842,30.30489155161296],[-97.84245729446411,30.305660358272196],[-97.84276843070984,30.306419896279607],[-97.84296154975891,30.307420254431218],[-97.84304738044739,30.307948217117563],[-97.84319758415222,30.308365027755883],[-97.84350872039795,30.308744787016597],[-97.84376621246338,30.3090689705872],[-97.84433484077454,30.309606186714937],[-97.8452467918396,30.310013728020085],[-97.84608364105225,30.310180448974677],[-97.84709215164185,30.310254547085695],[-97.84756422042847,30.31032864514068],[-97.84806847572327,30.310467578842797],[-97.84875512123108,30.310773232294178],[-97.84939885139465,30.311217817430926],[-97.8504717350006,30.312264436977852],[-97.85105109214783,30.312644181129656],[-97.85564303398132,30.314700331226202],[-97.85846471786499,30.315932148230964],[-97.8588616847992,30.316191476153538],[-97.8593122959137,30.316478588410085],[-97.8602135181427,30.31734918172234],[-97.86096453666687,30.317886352460327]]}},{"type":"Feature","properties":{},"geometry":{"type":"LineString","coordinates":[[-97.86095380783081,30.31787709092081],[-97.86173701286316,30.318201244282356],[-97.86260604858398,30.31834942831902],[-97.8633463382721,30.318367951307827],[-97.86431193351746,30.318136413695846],[-97.86553502082825,30.317812260119805],[-97.867112159729,30.317645552148846],[-97.86887168884277,30.31757145962627],[-97.87043809890747,30.317052810399346],[-97.87213325500488,30.316460065064092],[-97.87297010421752,30.316274831411445],[-97.87387132644653,30.31626556971962],[-97.8747296333313,30.316256308026926],[-97.8757381439209,30.31634892491452],[-97.87692904472351,30.31644154171459],[-97.87756204605103,30.31637670996374],[-97.87822723388672,30.316172952753245],[-97.87895679473877,30.31582100748261],[-97.87940740585327,30.315469060947894],[-97.88002967834473,30.314802211415493],[-97.8809094429016,30.313737095110838],[-97.88134932518005,30.313199901626263],[-97.88187503814696,30.312810897609516],[-97.88346290588379,30.312060671216628],[-97.88437485694885,30.31173649754149],[-97.88535118103027,30.311449371390903],[-97.88608074188232,30.311134457871407],[-97.88830161094664,30.30964323599452],[-97.88869857788086,30.309374628400246],[-97.88918137550354,30.309143069538496],[-97.89006114006042,30.308948559671837],[-97.89126276969908,30.308735524613088],[-97.89229273796082,30.308485439388093],[-97.89295792579651,30.308226091073383],[-97.89424538612366,30.307725917385717],[-97.89691686630249,30.306892288901153],[-97.89920210838318,30.30619759308172],[-97.89997458457947,30.30604012801154],[-97.90086507797241,30.30602160269253],[-97.90155172348022,30.306160542499736],[-97.9022490978241,30.306438421523325],[-97.90279626846313,30.306762612721943],[-97.90347218513489,30.307281316409554],[-97.90531754493713,30.308596588455764],[-97.9061222076416,30.309170856630775],[-97.90666937828064,30.309402415426902],[-97.90736675262451,30.30961544903616],[-97.9080319404602,30.309754383749258],[-97.9095447063446,30.309837744482575],[-97.91134715080261,30.310134137626843],[-97.91219472885132,30.310504627796742],[-97.91290283203125,30.310689872356505],[-97.91377186775208,30.310754707869723],[-97.91484475135803,30.31054167673672],[-97.91987657546997,30.308698474990386],[-97.92090654373169,30.308355765316524],[-97.92185068130493,30.308207566167493],[-97.92442560195923,30.308448389670865],[-97.92563796043396,30.308531751514938],[-97.9261314868927,30.308494701815214],[-97.92701125144958,30.30830945310653],[-97.92936086654663,30.30759624230932],[-97.93014407157898,30.307225741145743],[-97.93135643005371,30.306503259848835],[-97.93259024620056,30.305743722487332],[-97.93336272239685,30.305373214321776],[-97.9338026046753,30.305280587061553],[-97.93456435203552,30.30528984979151],[-97.93544411659241,30.305262061599013],[-97.93566942214966,30.305280587061553],[-97.9359483718872,30.30517869697425],[-97.93689250946045,30.305595519389144],[-97.9381799697876,30.30604012801154],[-97.9430079460144,30.30789264223186],[-97.94442415237427,30.308355765316524],[-97.94521808624268,30.308541013937678],[-97.94626951217651,30.308559538780543],[-97.9486298561096,30.308392815068764],[-97.94902682304382,30.30830945310653],[-97.95256733894348,30.308114941585576],[-97.9542624950409,30.30802231691613],[-97.95571088790894,30.308040841857032],[-97.95705199241638,30.308226091073383],[-97.95922994613647,30.30868921258253],[-97.96361804008484,30.309624711356484],[-97.96507716178894,30.309930367436454],[-97.96777009963989,30.310523152268473],[-97.97132134437561,30.311301176919528],[-97.97252297401428,30.311764283898526],[-97.97325253486633,30.312125505822976],[-97.9740035533905,30.312616395022104],[-97.97460436820984,30.313125805742118],[-97.97570943832397,30.314061262168238],[-97.97667503356934,30.314857782383186],[-97.97760844230652,30.31563577262191],[-97.97832727432251,30.31613590594218],[-97.97901391983032,30.316460065064092],[-97.98002243041992,30.316756438179922],[-97.9817283153534,30.317006502299165],[-97.98495769500732,30.317330658540893],[-97.98634171485901,30.31746958231622],[-97.99027919769287,30.31787709092081],[-97.99423813819885,30.318238290312536],[-97.99604058265686,30.318247551817876],[-97.99810051918028,30.318034536973208],[-97.99988150596619,30.31779373702594],[-98.00111532211304,30.31761776745944],[-98.00182342529297,30.31759924432878],[-98.00261735916138,30.317673336830367],[-98.00344347953796,30.317886352460327],[-98.0039370059967,30.31810862914562],[-98.0044412612915,30.318395735784495],[-98.00563216209412,30.319247789243317],[-98.00718784332275,30.32038693609599],[-98.00792813301086,30.32092409017907],[-98.00855040550232,30.321359368051603],[-98.01052451133728,30.322785584126212],[-98.01196217536926,30.32385060206824],[-98.01307797431946,30.32466556449914],[-98.0162000656128,30.326906676222517],[-98.01691889762878,30.32742527328231],[-98.0175518989563,30.327804958674232],[-98.01871061325073,30.328462459164108],[-98.01990151405334,30.329064392362064],[-98.02059888839722,30.329369987800487],[-98.02303433418274,30.330240466549895],[-98.0238389968872,30.330759045956874],[-98.02522301673889,30.3320647426591],[-98.02582383155823,30.332462930387774],[-98.0265426635742,30.332851856373555],[-98.02734732627869,30.33314817989734],[-98.02799105644226,30.333564883335494],[-98.02857041358948,30.334037145088335],[-98.02950382232665,30.334852022756838],[-98.03002953529356,30.33518537984842],[-98.0313491821289,30.335731712627535],[-98.03216457366942,30.336185444313312],[-98.03332328796387,30.33703734302268],[-98.0339241027832,30.337500328342713],[-98.03470730781555,30.338092946357463],[-98.0358874797821,30.338944828468968],[-98.03671360015869,30.339454102277784],[-98.03731441497803,30.339750405820126],[-98.03819417953491,30.339963373437246],[-98.03913831710815,30.34006522735121],[-98.04033994674683,30.340093005672998],[-98.04120898246764,30.340213378309624],[-98.04212093353271,30.34055597654222],[-98.04263591766357,30.340861536116424],[-98.04422378540039,30.342028209353728],[-98.04487824440002,30.34252820791303],[-98.04569363594055,30.343167091244286],[-98.04656267166138,30.34377819313735],[-98.04706692695618,30.344167074173676],[-98.04881572723389,30.345435556338003],[-98.04991006851195,30.346120715048357],[-98.05046796798706,30.346416998410486],[-98.05153012275696,30.346926233343456],[-98.05293560028076,30.34735213688897],[-98.05445909500122,30.347648416523082],[-98.0565083026886,30.347898401766653],[-98.05796742439269,30.348111351655643],[-98.05835366249084,30.348111351655643],[-98.0593729019165,30.348352077059157],[-98.05976986885071,30.348527991402605],[-98.06122899055481,30.34928719704694],[-98.06190490722656,30.349833451122976],[-98.06240916252136,30.350416736007233],[-98.06504845619202,30.353592337158286],[-98.06764483451843,30.35665674083877],[-98.06847095489502,30.357795452488002],[-98.0691146850586,30.35922113781704],[-98.06920051574707,30.360304274469122],[-98.06924343109131,30.361489230743164],[-98.06926488876343,30.361901184834913],[-98.0693882703781,30.362641772096982],[-98.06946337223053,30.363090750394218],[-98.06971013545989,30.363539726630357],[-98.07100296020508,30.36553926586787],[-98.07260692119598,30.36797383483723],[-98.0727356672287,30.368149713898095],[-98.0731862783432,30.368644950606754],[-98.07380855083466,30.369140184807176],[-98.0743396282196,30.369487310087926],[-98.07516574859619,30.36988997386975],[-98.0759060382843,30.37033429060109],[-98.07630836963654,30.370579589598115],[-98.07668924331665,30.370949851069597],[-98.07706475257872,30.371417304174738],[-98.07801425457001,30.37284741910317],[-98.07931244373322,30.374846768012734],[-98.08031558990479,30.376438812899938],[-98.08118462562561,30.377725388370592],[-98.08171570301054,30.3785722975132],[-98.08257400989532,30.37991900677527],[-98.08298170566559,30.38052987908585],[-98.08363080024718,30.381510969048815],[-98.08425307273863,30.382473538308574],[-98.0852025747299,30.383889608543697],[-98.08546543121338,30.384222798558092],[-98.085578083992,30.38450971127127],[-98.08605015277863,30.38545374070417],[-98.08614671230315,30.38583320094567],[-98.08634519577026,30.38649956658418],[-98.08647394180298,30.387152045201844],[-98.08645784854889,30.38848475394586],[-98.08632373809814,30.390974279221687],[-98.08624863624571,30.391862718979045],[-98.08629155158997,30.392547552444142],[-98.08648467063904,30.393287907546306],[-98.08679580688477,30.393977358189456],[-98.08702111244202,30.394370666779214],[-98.08776140213013,30.395291465401353],[-98.0889469385147,30.3966564524123],[-98.0898106098175,30.397688277390788],[-98.09088885784149,30.399016215468656],[-98.09251964092255,30.400917865384177],[-98.09356033802031,30.402120836476087],[-98.09435963630676,30.402648288358403],[-98.09558272361755,30.403291405658404],[-98.09767484664917,30.404096452999386],[-98.09992790222168,30.404966266804376],[-98.10089886188507,30.40529938493297],[-98.10206830501556,30.405845326074942],[-98.10259938240051,30.406136801875345],[-98.10401022434235,30.406951078865387],[-98.10602188110352,30.40812621663945],[-98.10723960399628,30.408815562530624],[-98.10984134674072,30.410351537211188],[-98.11195492744446,30.411577523753966],[-98.11433672904968,30.412942283114933],[-98.11688482761383,30.414413426071494],[-98.1203180551529,30.41637491552058],[-98.12201857566833,30.417351019400467],[-98.12316119670868,30.41816982886932],[-98.1244432926178,30.419247686226722],[-98.12631011009216,30.420982410192682],[-98.12690019607544,30.421597651550794],[-98.12752783298492,30.42221288902962],[-98.12809646129608,30.422712477511713],[-98.12920153141022,30.42367926647594],[-98.13009202480316,30.42435462533199],[-98.13104689121245,30.424803320069394],[-98.13255429267883,30.42532139802404],[-98.13346087932587,30.425672949354965],[-98.13436210155487,30.426223402183727],[-98.13488245010376,30.426630457740135],[-98.13525259494781,30.426940373899903],[-98.13622891902924,30.42771747277693],[-98.1368350982666,30.428235535255837],[-98.13807427883148,30.429243898977063],[-98.13838541507721,30.42951680296249],[-98.13991963863373,30.430751799587945],[-98.140869140625,30.431542744268654],[-98.14162820577621,30.432356809288798],[-98.14206004142761,30.432928038356994],[-98.14233899116516,30.433399820165942],[-98.14255893230438,30.433820721618222],[-98.14280033111572,30.43437344109607],[-98.14291834831238,30.434676394794625],[-98.1431570649147,30.435252235489738],[-98.14339309930801,30.435798009074265],[-98.14357280731201,30.4362235253431],[-98.14377397298813,30.43669760378203],[-98.14397245645523,30.4371231161255],[-98.14422458410263,30.437634190996683],[-98.14440965652466,30.437974135242065],[-98.14485490322113,30.438684083007338],[-98.14525723457336,30.43935471295655],[-98.1454262137413,30.439632213655297],[-98.14590364694595,30.440383774081695],[-98.14605385065077,30.44064508450344],[-98.14643204212189,30.441234764740134],[-98.14662784337997,30.441537697122104],[-98.14689338207245,30.441997875046415],[-98.14721524715424,30.442636108170262],[-98.14746737480164,30.443262775034523],[-98.14790725708006,30.44465946454786],[-98.14846515655518,30.448692177590324],[-98.14876556396484,30.45091194843492],[-98.14910888671875,30.452114303199913],[-98.14940929412842,30.45276171885227],[-98.1498599052429,30.453501617188383],[-98.1505250930786,30.454278504395244],[-98.15144777297974,30.45509237958795],[-98.15400123596191,30.457256514643596],[-98.15556764602661,30.45856976974716],[-98.1552243232727,30.458662251833765],[-98.15380811691283,30.458921201209215],[-98.15088987350462,30.4593651128231],[-98.15033197402954,30.459402105366298],[-98.14923763275145,30.4593651128231],[-98.14859390258789,30.459513082911588],[-98.147714138031,30.459975487989645],[-98.1438946723938,30.461788094731457],[-98.14125537872314,30.462953324113418],[-98.14106225967407,30.46302730646074],[-98.13994646072388,30.462712881096543],[-98.13816547393799,30.462268984736955],[-98.13647031784058,30.461251714617127],[-98.13580513000488,30.4608817955762],[-98.1352686882019,30.460863299587277],[-98.13355207443237,30.460955779496754],[-98.13209295272827,30.460789315596497],[-98.13142776489258,30.4608817955762],[-98.13078403472899,30.46114073905233],[-98.13018321990967,30.461473665367446],[-98.1297755241394,30.461825086354633],[-98.12917470932005,30.462121018834257],[-98.12857389450073,30.462158010331],[-98.12758684158325,30.462047035798633],[-98.12636375427246,30.46195455692508],[-98.12565565109253,30.461677119777708],[-98.1244969367981,30.461085251222528],[-98.12402486801147,30.4608817955762],[-98.12346696853638,30.460585859332124],[-98.1232738494873,30.461048259318446],[-98.12263011932373,30.46243544610882],[-98.12192201614378,30.463656154144505],[-98.12177181243896,30.46398907186299],[-98.12177181243896,30.465006313397314],[-98.12179327011108,30.465783108869857],[-98.1218147277832,30.466504413404433],[-98.12178254127501,30.466689362424663],[-98.12171816825867,30.46669860986646]]}},{"type":"Feature","properties":{"marker-color":"#7e7e7e","marker-size":"medium","marker-symbol":"airport", "popupContent": "Finish"},"geometry":{"type":"Point","coordinates":[-98.1217235326767,30.46670323358704]}},{"type":"Feature","properties":{"marker-color":"#7e7e7e","marker-size":"medium","marker-symbol":"danger", "popupContent": "Start"},"geometry":{"type":"Point","coordinates":[-97.76928395032883,30.35182401220756]}}]}
var marker_map = L.markerClusterGroup();
var marker_map_current = L.markerClusterGroup();
var heatArray = [];
var camMarkers = L.markerClusterGroup();
var camHeatArray = [];

//Traffic Incidents-------------------------------------------------------------------------------
var baseURL = "https://data.austintexas.gov/resource/r3af-2r8x.json?";
var date = "$where=traffic_report_status_date_time between'2010-01-10T12:00:00' and '2018-08-25T14:00:00'";
var limit = "&$limit=10000";
var trafficUrl = baseURL + date + limit;
d3.json(trafficUrl).then(successHandle,errorHandle);
function errorHandle(error){
  console.log(error)
}
function successHandle(response) {
  // console.log(response);
  marker_map = L.markerClusterGroup();
  marker_map_current = L.markerClusterGroup();
  heatArray = [];

  for (var i = 0; i < response.length; i++) {
    // console.log(response[i]);
    if(i < 500){
      if(response[i].location){
        var location = [response[i].latitude, response[i].longitude];
        marker_map_current.addLayer(L.marker([location[0], location[1]])
              .bindPopup(`<p>${response[i].issue_reported}<br>${response[i].traffic_report_status_date_time}</p>`));
      }
    }
    if(response[i].location){
      var location = [response[i].latitude, response[i].longitude];
      heatArray.push([response[i].latitude, response[i].longitude]);
      marker_map.addLayer(L.marker([location[0], location[1]])
            .bindPopup(response[i].issue_reported));
    }
  }
  // console.log(markers);
  // myMap.addLayer(markers);

  var heat_map = L.heatLayer(heatArray, {
    radius: 20,
    blur: 35
  });
  
  createMap(marker_map,heat_map,marker_map_current);
}

// console.log(heat);


//Traffic Cameras-------------------------------------------------------------------------------
// baseURL = "https://data.austintexas.gov/resource/fs3c-45ge.json?";
// limit = "&$limit=600";
// var cameraUrl = baseURL + limit;
// d3.json(cameraUrl).then(camSuccessHandle,camErrorHandle);

// function camErrorHandle(error){
//   console.log(error)
// }
// function camSuccessHandle(response) {
//   // console.log(response);
//   camMarkers = L.markerClusterGroup();
//   camHeatArray = [];
//   for (var i = 0; i < response.length; i++) {
//     // console.log(response[i].location.coordinates);
//     if(response[i].location){
//       var camLocation = response[i].location.coordinates;
//       camHeatArray.push([camLocation[1], camLocation[0]]);
//       camMarkers.addLayer(L.marker([camLocation[1], camLocation[0]])
//             .bindPopup(response[i].location_name));
//     }
//   }
//   // console.log(camMarkers);
//   myMap.addLayer(camMarkers);
// }
// var camHeat = L.heatLayer(camHeatArray, {
//   radius: 20,
//   blur: 35
// });
// console.log(camHeat);

function createMap(markers,heat,current){
  //Map Building-------------------------------------------------------------------------------
  var streetmap = L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}", {
      attribution: "Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>",
      maxZoom: 18,
      id: "mapbox.streets",
      accessToken: API_KEY
  });
  var darkmap = L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}", {
      attribution: "Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>",
      maxZoom: 18,
      id: "mapbox.dark",
      accessToken: API_KEY
  });

  var baseMaps = {
      "Street Map": streetmap,
      "Dark Map": darkmap
  };

  var overlayMaps = {
      "Traffic Trends": markers,
      "Traffic (Recent)": current,
      "Traffic Trends (Heat)": heat,
      "Escape Route": L.geoJSON(geojsonFeature)
      // Cameras: camMarkers,
      // "Cameras (Heat)": camHeat
  };

    var myMap = L.map("map", {
      center: [30.36, -97.7431],
      zoom: 10,
      layers: [darkmap, heat]
    });
  // myMap.addLayer(markers);
  // myMap.addLayer(camMarkers);

  L.control.layers(baseMaps, overlayMaps, {
    collapsed: false
  }).addTo(myMap);
}
